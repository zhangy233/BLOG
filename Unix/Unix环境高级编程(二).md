
## Unix进程退出相关

### 进程结束方法

*  `exit()`
*  `_exit()`
*  `Exit()`
*  `return`

	以上前三个方法都可以直接退出进程, return方法只有在最后一个线程中返回才会结束进程, 都可以为进程返回一个终止码(
相信绝大数情况都不需要关注). 前三种方法在实现上还有写不同, 可能会影响动作，接下来进行说明!
ps: 当然还有各种信号导致的结束

### IO流
	对于exit方法和return方法结束进程, 都会调用一个标准IO库的关闭操作, 所有数据会被冲洗写入文件
注意: *注意标准IO和文件IO的/文件流和文件描述符的去呗*
	对于_exit方式则不会

### atexit方法
`int atexit(void (*func)(void))`
> 该方法会注册一些函数,在进程退出时会被执行, 可以注册多个以堆栈的方式存储执行(FILO), 注意: *并不是任何情况都会执行*
	exit方式会调用改函数, _exit则不会

### 区别与关联
*  _exit是linux系统调用，关闭所有文件描述符，然后退出进程。
*  exit是c语言的库函数，他最终调用_exit。在此之前，先清洗标准输出的缓存，调用用atexit注册的函数等, 
*  在c语言的main函数中调用return就等价于调用exit。
*  _Exit是c语言的库函数，自c99后加入，等价于_exit，即可以认为它直接调用_Exit
*  对于fork的子进程建议使用_exit
注意: *exit和_exit对于父进程是有影响的, 对于vfork自不用说(工作在父进程空间), 对于fork来说也有可能很多资源共享(写时复制),*

> ***只有与进程内核相关的代码也会写在这里2019年7月30日22点55分***

## Unix进程环境变量

### 环境表
`extern char **environ;`
> 一个全局变量, 包括各种环境字符串(HOME/PATH等)
	实际操作中, 个人感觉直接对于environ进行操作实际没有太多需求

### 操作环境变量
```
int putenv(char *str);
int setenv(const char *name, const char *value, int rewrite);
int unsetenv(const char* name);
```
> 除去第一个以`name=value`形式设置, 其他大致明白函数使用, 其余看man手册即可

这些函数, 在开启一个新的进程进行操作时比较常见, 比如web服务器(一个进程做socket的accept操作, 然后开启新的进程进行逻辑处理, 可以将url等参数通过环境变量的方式进行传递).

ps: *顺便说明一下环境表通常实在进程地址空间的顶部, 无法往上扩展, 往下则是栈空间, 通常也是通过malloc分配空间*

> ***与环境变量相关的一些知识2019年7月30日22点56分***

> 关于Unix的相关知识, 但从此书来讲过多, 而且很多都用不到不到, 我个人认为做一些笔记有一个概念就可以了, 真正需要的时候再进行深入学习。也可以和自已已经了解的知识相互印证一下!